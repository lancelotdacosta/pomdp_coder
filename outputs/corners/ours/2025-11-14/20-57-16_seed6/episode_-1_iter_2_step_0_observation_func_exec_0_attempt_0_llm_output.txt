```python
def observation_func(state, action, empty_obs):
    """
    Args:
        state (MinigridState): the state of the environment
        action (int): the previous action that was taken
        empty_obs (MinigridObservation): an empty observation that needs to be filled and returned
    Returns:
        obs (MinigridObservation): observation of the agent
    """

    def rotate_agent_dir(agent_dir, action):
        """Rotate the agent's direction based on the action."""
        if action == Actions.left:
            return (agent_dir - 1) % 4
        elif action == Actions.right:
            return (agent_dir + 1) % 4
        else:
            return agent_dir

    def move_forward(agent_pos, agent_dir):
        """Move the agent forward in the direction it is facing."""
        new_pos = np.array(agent_pos) + DIR_TO_VEC[agent_dir]
        if 0 <= new_pos[0] < state.width and 0 <= new_pos[1] < state.height:
            if state.grid[tuple(new_pos)] != ObjectTypes.wall:
                return tuple(new_pos)
        return agent_pos

    # Update the agent's position and direction based on the action
    new_agent_dir = rotate_agent_dir(state.agent_dir, action)
    new_agent_pos = move_forward(state.agent_pos, new_agent_dir)

    # Get the field of view in front of the agent
    fov = state.get_field_of_view(3)

    # Create the observation
    obs = MinigridObservation(
        image=fov,
        agent_pos=new_agent_pos,
        agent_dir=new_agent_dir,
        carrying=state.carrying
    )

    return obs
```