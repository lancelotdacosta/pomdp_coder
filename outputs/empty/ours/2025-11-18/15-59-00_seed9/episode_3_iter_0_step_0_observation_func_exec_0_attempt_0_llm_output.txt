```python
def observation_func(state, action, empty_obs):
    """
    Args:
        state (MinigridState): the state of the environment
        action (int): the previous action that was taken
        empty_obs (MinigridObservation): an empty observation that needs to be filled and returned
    Returns:
        obs (MinigridObservation): observation of the agent
    """
    
    # Define the view size for the field of view
    view_size = 3

    # Get the field of view in front of the agent
    fov = state.get_field_of_view(view_size)

    # Update the agent's position and direction based on the action
    if action == Actions.left:
        state.agent_dir = (state.agent_dir - 1) % 4
    elif action == Actions.right:
        state.agent_dir = (state.agent_dir + 1) % 4
    elif action == Actions.forward:
        next_pos = np.array(state.front_pos)
        if state.grid[next_pos[0], next_pos[1]] != ObjectTypes.wall:
            state.agent_pos = tuple(next_pos)
    
    # Create the observation
    empty_obs.image = fov
    empty_obs.agent_pos = state.agent_pos
    empty_obs.agent_dir = state.agent_dir
    empty_obs.carrying = state.carrying

    return empty_obs
```