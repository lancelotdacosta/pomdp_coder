```python
def initial_func(empty_state: MinigridState):
    """
    Input:
        empty_state (MinigridState): An empty state with only the walls filled into the grid
    Returns:
        state (MinigridState): the initial state of the environment
    """

    # Define the dimensions of the grid
    width = empty_state.width
    height = empty_state.height

    # Initialize the grid with empty cells
    grid = np.full((width, height), ObjectTypes.empty, dtype=np.int8)

    # Place walls in the grid
    grid[:, 0] = ObjectTypes.wall
    grid[:, -1] = ObjectTypes.wall
    grid[0, :] = ObjectTypes.wall
    grid[-1, :] = ObjectTypes.wall

    # Place the key and goal objects
    key_pos = (3, 2)
    goal_pos = (9, 3)
    grid[key_pos] = ObjectTypes.key
    grid[goal_pos] = ObjectTypes.goal

    # Place the door
    door_pos = (5, 3)
    grid[door_pos] = ObjectTypes.locked_door

    # Define possible agent positions and directions
    possible_agent_positions = [
        (1, 3), (2, 2), (2, 3), (2, 1)
    ]
    possible_agent_directions = [0, 3]

    # Randomly select an agent position and direction
    agent_pos = possible_agent_positions[np.random.choice(len(possible_agent_positions))]
    agent_dir = np.random.choice(possible_agent_directions)

    # Create the initial state
    state = MinigridState(
        grid=grid,
        agent_pos=agent_pos,
        agent_dir=agent_dir,
        carrying=None
    )

    return state
```